Title: Push Notifications

URL Source: https://developers.google.com/gmail/api/guides/push

Markdown Content:
Push Notifications | Gmail | Google for Developers
===============
[Skip to main content](https://developers.google.com/gmail/api/guides/push#main-content)

[![Image 1: Google Workspace](https://fonts.gstatic.com/s/i/productlogos/googleg/v6/16px.svg)](https://developers.google.com/workspace)
*   [Workspace](https://developers.google.com/workspace)

[Home](https://developers.google.com/workspace)[Gmail](https://developers.google.com/workspace/gmail)[All products](https://developers.google.com/workspace/products-menu)

*   Google Workspace apps
*   [Admin console](https://developers.google.com/workspace/admin)
*   [Cloud Search](https://developers.google.com/workspace/cloud-search)
*   [Gmail](https://developers.google.com/workspace/gmail)
*   [Google Calendar](https://developers.google.com/workspace/calendar)
*   [Google Chat](https://developers.google.com/workspace/chat)
*   [Google Classroom](https://developers.google.com/workspace/classroom)
*   [Google Docs](https://developers.google.com/workspace/docs)
*   [Google Drive](https://developers.google.com/workspace/drive)

*   [Google Forms](https://developers.google.com/workspace/forms)
*   [Google Keep](https://developers.google.com/workspace/keep)
*   [Google Meet](https://developers.google.com/workspace/meet)
*   [Google Sheets](https://developers.google.com/workspace/sheets)
*   [Google Sites](https://developers.google.com/workspace/sites)
*   [Google Slides](https://developers.google.com/workspace/slides)
*   [Google Tasks](https://developers.google.com/workspace/tasks)
*   [Google Vault](https://developers.google.com/workspace/vault)

*   Extend, automate & share
*   [Add-ons](https://developers.google.com/workspace/add-ons)
*   [Apps Script](https://developers.google.com/apps-script)
*   [Chat apps](https://developers.google.com/workspace/add-ons/chat)
*   [Drive apps](https://developers.google.com/workspace/drive/api/guides/about-apps)
*   [Marketplace](https://developers.google.com/workspace/marketplace)

[Resources](https://developers.google.com/workspace/resources-menu)

*   Tools
*   [Admin console](https://admin.google.com/)
*   [Apps Script dashboard](https://script.google.com/)
*   [Google Cloud console](https://console.cloud.google.com/workspace-api)
*   [APIs Explorer](https://developers.google.com/workspace/explore)
*   [Card Builder](https://addons.gsuite.google.com/uikit/builder)

*   Training & support
*   [How to get started](https://developers.google.com/workspace/guides/get-started)
*   [Codelabs](https://codelabs.developers.google.com/?product=googleworkspace)
*   [Developer support](https://developers.google.com/workspace/support)

*   Updates
*   [Release notes](https://developers.google.com/workspace/release-notes)
*   [Developer Previews](https://developers.google.com/workspace/preview)
*   [YouTube](https://www.youtube.com/@googleworkspacedevs)
*   [Newsletter](https://developers.google.com/workspace/newsletters)
*   [X (Twitter)](https://twitter.com/workspacedevs)
*   [Blog](https://developers.googleblog.com/search/?query=Google+Workspace)

More

/

*   [English](https://developers.google.com/workspace/gmail/api/guides/push)
*   [Deutsch](https://developers.google.com/workspace/gmail/api/guides/push?hl=de)
*   [Español](https://developers.google.com/workspace/gmail/api/guides/push?hl=es)
*   [Español – América Latina](https://developers.google.com/workspace/gmail/api/guides/push?hl=es-419)
*   [Français](https://developers.google.com/workspace/gmail/api/guides/push?hl=fr)
*   [Indonesia](https://developers.google.com/workspace/gmail/api/guides/push?hl=id)
*   [Italiano](https://developers.google.com/workspace/gmail/api/guides/push?hl=it)
*   [Polski](https://developers.google.com/workspace/gmail/api/guides/push?hl=pl)
*   [Português – Brasil](https://developers.google.com/workspace/gmail/api/guides/push?hl=pt-br)
*   [Tiếng Việt](https://developers.google.com/workspace/gmail/api/guides/push?hl=vi)
*   [Türkçe](https://developers.google.com/workspace/gmail/api/guides/push?hl=tr)
*   [Русский](https://developers.google.com/workspace/gmail/api/guides/push?hl=ru)
*   [עברית](https://developers.google.com/workspace/gmail/api/guides/push?hl=he)
*   [العربيّة](https://developers.google.com/workspace/gmail/api/guides/push?hl=ar)
*   [فارسی](https://developers.google.com/workspace/gmail/api/guides/push?hl=fa)
*   [हिंदी](https://developers.google.com/workspace/gmail/api/guides/push?hl=hi)
*   [বাংলা](https://developers.google.com/workspace/gmail/api/guides/push?hl=bn)
*   [ภาษาไทย](https://developers.google.com/workspace/gmail/api/guides/push?hl=th)
*   [中文 – 简体](https://developers.google.com/workspace/gmail/api/guides/push?hl=zh-cn)
*   [中文 – 繁體](https://developers.google.com/workspace/gmail/api/guides/push?hl=zh-tw)
*   [日本語](https://developers.google.com/workspace/gmail/api/guides/push?hl=ja)
*   [한국어](https://developers.google.com/workspace/gmail/api/guides/push?hl=ko)

[Sign in](https://developers.google.com/_d/signin?continue=https%3A%2F%2Fdevelopers.google.com%2Fworkspace%2Fgmail%2Fapi%2Fguides%2Fpush&prompt=select_account)

*   [Gmail](https://developers.google.com/workspace/gmail)

[Overview](https://developers.google.com/workspace/gmail)[Guides](https://developers.google.com/workspace/gmail/api/guides)[Reference](https://developers.google.com/workspace/gmail/api/reference/rest)[Samples](https://developers.google.com/workspace/gmail/api/samples)[Support](https://developers.google.com/workspace/gmail/api/support)More

[![Image 2: Google Workspace](https://fonts.gstatic.com/s/i/productlogos/googleg/v6/16px.svg)](https://developers.google.com/workspace)
*   [Workspace](https://developers.google.com/workspace)

*   [Home](https://developers.google.com/workspace)
*   [Gmail](https://developers.google.com/workspace/gmail)
    *   [Overview](https://developers.google.com/workspace/gmail)
    *   [Guides](https://developers.google.com/workspace/gmail/api/guides)
    *   [Reference](https://developers.google.com/workspace/gmail/api/reference/rest)
    *   [Samples](https://developers.google.com/workspace/gmail/api/samples)
    *   [Support](https://developers.google.com/workspace/gmail/api/support)

*   [All products](https://developers.google.com/workspace/products-menu)
    *    More 

*   [Resources](https://developers.google.com/workspace/resources-menu)
    *    More 

*   Get started 
*   [Gmail API overview](https://developers.google.com/workspace/gmail/api/guides)
*   [Get started with Google Workspace](https://developers.google.com/workspace/guides/get-started)
*   [Configure OAuth consent](https://developers.google.com/workspace/guides/configure-oauth-consent)
*   Gmail API 
*   
[](https://developers.google.com/gmail/api/guides/push)Authentication & authorization 
    *   [Choose scopes](https://developers.google.com/workspace/gmail/api/auth/scopes)
    *   [Implement server-side authorization](https://developers.google.com/workspace/gmail/api/auth/web-server)

*   
[](https://developers.google.com/gmail/api/guides/push)Quickstarts 
    *   [JavaScript](https://developers.google.com/workspace/gmail/api/quickstart/js)
    *   [Java](https://developers.google.com/workspace/gmail/api/quickstart/java)
    *   [Python](https://developers.google.com/workspace/gmail/api/quickstart/python)
    *   [Apps Script](https://developers.google.com/workspace/gmail/api/quickstart/apps-script)
    *   [Go](https://developers.google.com/workspace/gmail/api/quickstart/go)
    *   [Node.js](https://developers.google.com/workspace/gmail/api/quickstart/nodejs)

*   
[](https://developers.google.com/gmail/api/guides/push)Create & send mail 
    *   [Create drafts](https://developers.google.com/workspace/gmail/api/guides/drafts)
    *   [Send email](https://developers.google.com/workspace/gmail/api/guides/sending)
    *   [Upload attachments](https://developers.google.com/workspace/gmail/api/guides/uploads)

*   
[](https://developers.google.com/gmail/api/guides/push)Manage mailboxes 
    *   [Threads](https://developers.google.com/workspace/gmail/api/guides/threads)
    *   [Labels](https://developers.google.com/workspace/gmail/api/guides/labels)
    *   [Search for messages](https://developers.google.com/workspace/gmail/api/guides/filtering)
    *   [List messages](https://developers.google.com/workspace/gmail/api/guides/list-messages)
    *   [Sync a mail client](https://developers.google.com/workspace/gmail/api/guides/sync)
    *   [Receive push notifications](https://developers.google.com/workspace/gmail/api/guides/push)

*   
[](https://developers.google.com/gmail/api/guides/push)Manage settings 
    *   [Aliases & signatures](https://developers.google.com/workspace/gmail/api/guides/alias_and_signature_settings)
    *   [Forwarding](https://developers.google.com/workspace/gmail/api/guides/forwarding_settings)
    *   [Filters](https://developers.google.com/workspace/gmail/api/guides/filter_settings)
    *   [Vacation](https://developers.google.com/workspace/gmail/api/guides/vacation_settings)
    *   [S/MIME certificates](https://developers.google.com/workspace/gmail/api/guides/smime_certs)
    *   [POP & IMAP](https://developers.google.com/workspace/gmail/api/guides/pop_imap_settings)
    *   [Delegates](https://developers.google.com/workspace/gmail/api/guides/delegate_settings)
    *   [Language](https://developers.google.com/workspace/gmail/api/guides/language-settings)
    *   [Inbox feed](https://developers.google.com/workspace/gmail/gmail_inbox_feed)

*   
[](https://developers.google.com/gmail/api/guides/push)Best practices 
    *   [Batch requests](https://developers.google.com/workspace/gmail/api/guides/batch)
    *   [Performance tips](https://developers.google.com/workspace/gmail/api/guides/performance)
    *   [Resolve errors](https://developers.google.com/workspace/gmail/api/guides/handle-errors)

*   
[](https://developers.google.com/gmail/api/guides/push)Troubleshoot 
    *   [Troubleshoot authentication & authorization](https://developers.google.com/workspace/gmail/api/troubleshoot-authentication-authorization)

*   
[](https://developers.google.com/gmail/api/guides/push)Migrate from a previous API 
    *   [Email Settings API](https://developers.google.com/workspace/gmail/api/guides/migrate-from-email-settings)

*   IMAP for Gmail 
*   [Overview](https://developers.google.com/workspace/gmail/imap/imap-smtp)
*   [XOAUTH2 Mechanism](https://developers.google.com/workspace/gmail/imap/xoauth2-protocol)
*   [Libraries and Samples](https://developers.google.com/workspace/gmail/imap/xoauth2-libraries)
*   [IMAP Extensions](https://developers.google.com/workspace/gmail/imap/imap-extensions)
*   Postmaster Tools API 
*   [Overview](https://developers.google.com/workspace/gmail/postmaster)
*   
[](https://developers.google.com/gmail/api/guides/push)Quickstarts 
    *   [Java](https://developers.google.com/workspace/gmail/postmaster/quickstart/java)
    *   [Python](https://developers.google.com/workspace/gmail/postmaster/quickstart/python)

*   
[](https://developers.google.com/gmail/api/guides/push)How do I... 
    *   [Set up authentication domains](https://developers.google.com/workspace/gmail/postmaster/guides/domain)
    *   [Set up the API](https://developers.google.com/workspace/gmail/postmaster/guides/setup)
    *   [Verify authentication domains](https://developers.google.com/workspace/gmail/postmaster/guides/verify-domain)
    *   [Retrieve email metrics](https://developers.google.com/workspace/gmail/postmaster/guides/retrieve-metrics)

*   
[](https://developers.google.com/gmail/api/guides/push)Troubleshoot 
    *   [Troubleshoot authentication & authorization](https://developers.google.com/workspace/gmail/postmaster/troubleshoot-authentication-authorization)

*   Sender resources 
*   
[](https://developers.google.com/gmail/api/guides/push)AMP for Gmail 
    *   [Overview](https://developers.google.com/workspace/gmail/ampemail)
    *   [AMP developer guides](https://amp.dev/about/email.html)
    *   [AMP reference](https://amp.dev/documentation/components/?format=email)
    *   [Authenticate requests](https://developers.google.com/workspace/gmail/ampemail/authenticating-requests)
    *   [Security requirements](https://developers.google.com/workspace/gmail/ampemail/security-requirements)
    *   [Test dynamic email](https://developers.google.com/workspace/gmail/ampemail/testing-dynamic-email)
    *   [Debug dynamic email](https://developers.google.com/workspace/gmail/ampemail/debugging-dynamic-email)
    *   [Register with Google](https://developers.google.com/workspace/gmail/ampemail/register)
    *   [Supported platforms](https://developers.google.com/workspace/gmail/ampemail/supported-platforms)
    *   [Tips and known limitations](https://developers.google.com/workspace/gmail/ampemail/tips)

*   [Bulk sender guidelines](https://support.google.com/mail/answer/81126)
*   [Email CSS](https://developers.google.com/workspace/gmail/design/css)
*   
[](https://developers.google.com/gmail/api/guides/push)Email markup 
    *   [Overview](https://developers.google.com/workspace/gmail/markup/overview)
    *   [Get Started](https://developers.google.com/workspace/gmail/markup/getting-started)
    *   
[](https://developers.google.com/gmail/api/guides/push)Actions and Highlights 
        *   [What Are Actions?](https://developers.google.com/workspace/gmail/markup/actions/actions-overview)
        *   [What Are Highlights?](https://developers.google.com/workspace/gmail/markup/highlights)
        *   [Declare Actions](https://developers.google.com/workspace/gmail/markup/actions/declaring-actions)
        *   [Handle Action Requests](https://developers.google.com/workspace/gmail/markup/actions/handling-action-requests)

    *   
[](https://developers.google.com/gmail/api/guides/push)Secure Actions 
        *   [Overview](https://developers.google.com/workspace/gmail/markup/actions/securing-actions)
        *   [Limited-Use Access Tokens](https://developers.google.com/workspace/gmail/markup/actions/limited-use-access-tokens)
        *   [Verify Bearer Tokens](https://developers.google.com/workspace/gmail/markup/actions/verifying-bearer-tokens)

    *   
[](https://developers.google.com/gmail/api/guides/push)Tutorials 
        *   [Apps Script Quickstart](https://developers.google.com/workspace/gmail/markup/apps-script-tutorial)
        *   [App Engine End-to-End](https://developers.google.com/workspace/gmail/markup/actions/end-to-end-example)
        *   [Test Your Schemas](https://developers.google.com/workspace/gmail/markup/testing-your-schema)

    *   [Register with Google](https://developers.google.com/workspace/gmail/markup/registering-with-google)

*   
[](https://developers.google.com/gmail/api/guides/push)Email promotions 
    *   [Overview](https://developers.google.com/workspace/gmail/promotab)
    *   [Get started](https://developers.google.com/workspace/gmail/promotab/overview)
    *   [Preview annotations](https://developers.google.com/workspace/gmail/promotab/preview)
    *   [Best Practices](https://developers.google.com/workspace/gmail/promotab/best-practices)
    *   [Troubleshooting](https://developers.google.com/workspace/gmail/promotab/troubleshooting)
    *   [FAQ](https://developers.google.com/workspace/gmail/promotab/faq)

*   
[](https://developers.google.com/gmail/api/guides/push)Email reactions 
    *   [Overview](https://developers.google.com/workspace/gmail/reactions/format)
    *   [Examples](https://developers.google.com/workspace/gmail/reactions/examples)

*   Android content provider 
*   [Overview](https://developers.google.com/workspace/gmail/android)
*   [Download a sample app](https://developers.google.com/static/workspace/gmail/android/android-gmail-api-sample.tar.gz)
*   [Content provider basics](https://developer.android.com/guide/topics/providers/content-provider-basics.html)
*   Extend & automate 
*   [Add-ons](https://developers.google.com/workspace/add-ons/gmail)
*   [Apps Script](https://developers.google.com/apps-script/reference/gmail)

*    Google Workspace apps 
*   [Admin console](https://developers.google.com/workspace/admin)
*   [Cloud Search](https://developers.google.com/workspace/cloud-search)
*   [Gmail](https://developers.google.com/workspace/gmail)
*   [Google Calendar](https://developers.google.com/workspace/calendar)
*   [Google Chat](https://developers.google.com/workspace/chat)
*   [Google Classroom](https://developers.google.com/workspace/classroom)
*   [Google Docs](https://developers.google.com/workspace/docs)
*   [Google Drive](https://developers.google.com/workspace/drive)

*   [Google Forms](https://developers.google.com/workspace/forms)
*   [Google Keep](https://developers.google.com/workspace/keep)
*   [Google Meet](https://developers.google.com/workspace/meet)
*   [Google Sheets](https://developers.google.com/workspace/sheets)
*   [Google Sites](https://developers.google.com/workspace/sites)
*   [Google Slides](https://developers.google.com/workspace/slides)
*   [Google Tasks](https://developers.google.com/workspace/tasks)
*   [Google Vault](https://developers.google.com/workspace/vault)
*    Extend, automate & share 
*   [Add-ons](https://developers.google.com/workspace/add-ons)
*   [Apps Script](https://developers.google.com/apps-script)
*   [Chat apps](https://developers.google.com/workspace/add-ons/chat)
*   [Drive apps](https://developers.google.com/workspace/drive/api/guides/about-apps)
*   [Marketplace](https://developers.google.com/workspace/marketplace)

*    Tools 
*   [Admin console](https://admin.google.com/)
*   [Apps Script dashboard](https://script.google.com/)
*   [Google Cloud console](https://console.cloud.google.com/workspace-api)
*   [APIs Explorer](https://developers.google.com/workspace/explore)
*   [Card Builder](https://addons.gsuite.google.com/uikit/builder)
*    Training & support 
*   [How to get started](https://developers.google.com/workspace/guides/get-started)
*   [Codelabs](https://codelabs.developers.google.com/?product=googleworkspace)
*   [Developer support](https://developers.google.com/workspace/support)
*    Updates 
*   [Release notes](https://developers.google.com/workspace/release-notes)
*   [Developer Previews](https://developers.google.com/workspace/preview)
*   [YouTube](https://www.youtube.com/@googleworkspacedevs)
*   [Newsletter](https://developers.google.com/workspace/newsletters)
*   [X (Twitter)](https://twitter.com/workspacedevs)
*   [Blog](https://developers.googleblog.com/search/?query=Google+Workspace)

*   On this page
*   [Overview](https://developers.google.com/gmail/api/guides/push#overview)
*   [Initial Cloud Pub/Sub Setup](https://developers.google.com/gmail/api/guides/push#initial_cloud_pubsub_setup)
    *   [Prerequisites](https://developers.google.com/gmail/api/guides/push#prerequisites)
    *   [Create a topic](https://developers.google.com/gmail/api/guides/push#create_a_topic)
    *   [Create a subscription](https://developers.google.com/gmail/api/guides/push#create_a_subscription)
    *   [Grant publish rights on your topic](https://developers.google.com/gmail/api/guides/push#grant_publish_rights_on_your_topic)

*   [Getting Gmail mailbox updates](https://developers.google.com/gmail/api/guides/push#gmail-watch)
    *   [Watch request](https://developers.google.com/gmail/api/guides/push#watch_request)
    *   [Watch response](https://developers.google.com/gmail/api/guides/push#watch_response)
    *   [Renew mailbox watch](https://developers.google.com/gmail/api/guides/push#renew_mailbox_watch)

*   [Receive notifications](https://developers.google.com/gmail/api/guides/push#receive_notifications)
    *   [Respond to notifications](https://developers.google.com/gmail/api/guides/push#respond_to_notifications)

*   [Stopping mailbox updates](https://developers.google.com/gmail/api/guides/push#stopping_mailbox_updates)
*   [Limitations](https://developers.google.com/gmail/api/guides/push#limitations)
    *   [Max notification rate](https://developers.google.com/gmail/api/guides/push#max_notification_rate)
    *   [Reliability](https://developers.google.com/gmail/api/guides/push#reliability)
    *   [Cloud Pub/Sub Limitations](https://developers.google.com/gmail/api/guides/push#cloud_pubsub_limitations)

*   [Home](https://developers.google.com/)
*    [Google Workspace](https://developers.google.com/workspace)
*    [Gmail](https://developers.google.com/workspace/gmail)
*    [Guides](https://developers.google.com/workspace/gmail/api/guides)

 Send feedback 
Push Notifications Stay organized with collections  Save and categorize content based on your preferences.
==========================================================================================================

*   On this page
*   [Overview](https://developers.google.com/gmail/api/guides/push#overview)
*   [Initial Cloud Pub/Sub Setup](https://developers.google.com/gmail/api/guides/push#initial_cloud_pubsub_setup)
    *   [Prerequisites](https://developers.google.com/gmail/api/guides/push#prerequisites)
    *   [Create a topic](https://developers.google.com/gmail/api/guides/push#create_a_topic)
    *   [Create a subscription](https://developers.google.com/gmail/api/guides/push#create_a_subscription)
    *   [Grant publish rights on your topic](https://developers.google.com/gmail/api/guides/push#grant_publish_rights_on_your_topic)

*   [Getting Gmail mailbox updates](https://developers.google.com/gmail/api/guides/push#gmail-watch)
    *   [Watch request](https://developers.google.com/gmail/api/guides/push#watch_request)
    *   [Watch response](https://developers.google.com/gmail/api/guides/push#watch_response)
    *   [Renew mailbox watch](https://developers.google.com/gmail/api/guides/push#renew_mailbox_watch)

*   [Receive notifications](https://developers.google.com/gmail/api/guides/push#receive_notifications)
    *   [Respond to notifications](https://developers.google.com/gmail/api/guides/push#respond_to_notifications)

*   [Stopping mailbox updates](https://developers.google.com/gmail/api/guides/push#stopping_mailbox_updates)
*   [Limitations](https://developers.google.com/gmail/api/guides/push#limitations)
    *   [Max notification rate](https://developers.google.com/gmail/api/guides/push#max_notification_rate)
    *   [Reliability](https://developers.google.com/gmail/api/guides/push#reliability)
    *   [Cloud Pub/Sub Limitations](https://developers.google.com/gmail/api/guides/push#cloud_pubsub_limitations)

Overview
--------

The Gmail API provides server push notifications that let you watch for changes to Gmail mailboxes. You can use this feature to improve the performance of your application. It lets you eliminate the extra network and compute costs involved with polling resources to determine if they have changed. Whenever a mailbox changes, the Gmail API notifies your backend server application.

**Note:** For notifications to user-owned devices (i.e. installed apps, mobile devices, or browsers), the poll-based [sync guide](https://developers.google.com/workspace/gmail/api/guides/sync) is still the recommended approach to retrieve updates.
[](https://developers.google.com/gmail/api/guides/push)

Initial Cloud Pub/Sub Setup
---------------------------

The Gmail API uses the [Cloud Pub/Sub API](https://docs.cloud.google.com/pubsub/overview) to deliver push notifications. This allows notification using a variety of methods including webhooks and polling on a single subscription endpoint.

### Prerequisites

In order to complete the rest of this setup, make sure you fulfill the [Cloud Pub/Sub Prerequisites](https://docs.cloud.google.com/pubsub/docs/push) and then [set up a Cloud Pub/Sub client](https://docs.cloud.google.com/pubsub/docs/reference/libraries).

### Create a topic

Using your Cloud Pub/Sub client, [create the topic](https://docs.cloud.google.com/pubsub/docs/create-topic) that the Gmail API should send notifications to. The topic name can be any name you choose under your project (i.e. matching `projects/myproject/topics/*`, where `myproject` is the _Project ID_ listed for your project in the Google Developers Console).

### Create a subscription

Follow the [Cloud Pub/Sub Subscriber Guide](https://docs.cloud.google.com/pubsub/docs/subscriber) to set up a subscription to the topic that you created. Configure the subscription type to be either a webhook push (i.e. HTTP POST callback) or pull (i.e. initiated by your app). This is how your application will receive notifications for updates.

[](https://developers.google.com/gmail/api/guides/push)

### Grant publish rights on your topic

Cloud Pub/Sub requires that you grant Gmail privileges to publish notifications to your topic.

To do this, you need to grant `publish` privileges to `gmail-api-push@system.gserviceaccount.com`. You can do this using the [Cloud Pub/Sub Developer Console permissions interface](https://console.cloud.google.com/project/_/cloudpubsub/topicList) following the [resource-level access control instructions](https://docs.cloud.google.com/pubsub/access_control#set_topic_level_access).

Your organization's [domain restricted sharing](https://docs.cloud.google.com/resource-manager/docs/organization-policy/domain-restricted-sharing#how-drs-works) configuration may prevent you from granting publish permissions. To resolve this, you can [configure an exception](https://docs.cloud.google.com/resource-manager/docs/organization-policy/restricting-domains#configure-exceptions) for this service account.

Getting Gmail mailbox updates
-----------------------------

Once the initial Cloud Pub/Sub setup is finished, configure Gmail accounts to send notifications for mailbox updates.

### Watch request

To configure Gmail accounts to send notifications to your Cloud Pub/Sub topic, use your _Gmail API_ client to call [`watch`](https://developers.google.com/workspace/gmail/api/reference/rest/v1/users/watch) on the Gmail user mailbox similar to any other Gmail API call. To do so, provide the topic name created above and any other options in your `watch` request, such as [`labels`](https://developers.google.com/workspace/gmail/api/guides/labels) to filter on. For example, to be notified any time a change is made to the Inbox:

[Protocol](https://developers.google.com/gmail/api/guides/push#protocol)[Python](https://developers.google.com/gmail/api/guides/push#python)More

```
POST "https://www.googleapis.com/gmail/v1/users/me/watch"
Content-type: application/json

{
  topicName: "projects/myproject/topics/mytopic",
  labelIds: ["INBOX"],
  labelFilterBehavior: "INCLUDE",
}
```

```
request = {
  'labelIds': ['INBOX'],
  'topicName': 'projects/myproject/topics/mytopic',
  'labelFilterBehavior': 'INCLUDE'
}
gmail.users().watch(userId='me', body=request).execute()
```

### Watch response

If the [`watch`](https://developers.google.com/workspace/gmail/api/reference/rest/v1/users/watch) request is successful you will receive a response like:

```
{
  historyId: 1234567890
  expiration: 1431990098200
}
```

with the current mailbox `historyId` for the user. All changes after that `historyId` will be notified to your client. If you need to process changes prior to this `historyId`, refer to the [sync guide](https://developers.google.com/workspace/gmail/api/guides/sync).

Additionally, a successful `watch` call should cause a notification to immediately be sent to your Cloud Pub/Sub topic.

If you receive an error from the `watch` call, the details should explain the source of the problem, which is typically with the setup of the Cloud Pub/Sub topic and subscription. Refer to the [Cloud Pub/Sub documentation](https://docs.cloud.google.com/pubsub/docs) to confirm that the setup is correct and for help with debugging topic and subscription issues.

### Renew mailbox watch

You must recall [`watch`](https://developers.google.com/workspace/gmail/api/reference/rest/v1/users/watch) at least every 7 days or else you will stop receiving updates for the user. We recommend calling `watch` once per day. The `watch` response also has an expiration field with the timestamp for the `watch` expiration.

Receive notifications
---------------------

Whenever a mailbox update occurs that matches your `watch`, your application will receive a notification message describing the change.

If you have configured a push subscription, a webhook notification to your server will conform to a [`PubsubMessage`](https://docs.cloud.google.com/pubsub/docs/reference/rest/v1/PubsubMessage):

```
POST https://yourserver.example.com/yourUrl
Content-type: application/json

{
  message:
  {
    // This is the actual notification data, as base64url-encoded JSON.
    data: "eyJlbWFpbEFkZHJlc3MiOiAidXNlckBleGFtcGxlLmNvbSIsICJoaXN0b3J5SWQiOiAiMTIzNDU2Nzg5MCJ9",

    // This is a Cloud Pub/Sub message id, unrelated to Gmail messages.
    "messageId": "2070443601311540",

    // This is the publish time of the message.
    "publishTime": "2021-02-26T19:13:55.749Z",
  }

  subscription: "projects/myproject/subscriptions/mysubscription"
}
```

The HTTP POST body is JSON and the actual Gmail notification payload is in the `message.data` field. That `message.data` field is a base64url-encoded string that decodes to a JSON object containing the email address and the new mailbox history ID for the user:

```
{"emailAddress": "user@example.com", "historyId": "9876543210"}
```

You can then use [`history.list`](https://developers.google.com/workspace/gmail/api/reference/rest/v1/users.history/list) to get the change details for the user since their _last known_ historyId, as per the [sync guide](https://developers.google.com/workspace/gmail/api/guides/sync#partial).

For example, to use [`history.list`](https://developers.google.com/workspace/gmail/api/reference/rest/v1/users.history/list) to identify changes that occurred between your initial [`watch`](https://developers.google.com/workspace/gmail/api/reference/rest/v1/users/watch) call and the receipt of the notification message shared in the previous example, pass `1234567890` as the `startHistoryId` to `history.list`. Afterwards,`9876543210` can be persisted as the _last known_ historyId for future use cases.

If you have configured a pull subscription instead, refer to the code samples in the [Cloud Pub/Sub Subscriber Pull Guide](https://docs.cloud.google.com/pubsub/docs/pull) for more details on receiving messages.

### Respond to notifications

All notifications need to be acknowledged. If you use webhook [push delivery](https://docs.cloud.google.com/pubsub/docs/push), then responding successfully (e.g. HTTP 200) will acknowledge the notification.

If using pull delivery ([REST Pull](https://docs.cloud.google.com/pubsub/docs/reference/rest/v1/projects.subscriptions/pull), [RPC Pull](https://docs.cloud.google.com/pubsub/docs/reference/rpc/google.pubsub.v1#google.pubsub.v1.PullRequest) , or [RPC StreamingPull](https://docs.cloud.google.com/pubsub/docs/reference/rpc/google.pubsub.v1#streamingpullrequest)) then you must follow up with an acknowledge call ([REST](https://docs.cloud.google.com/pubsub/docs/reference/rest/v1/projects.subscriptions/acknowledge) or [RPC](https://docs.cloud.google.com/pubsub/docs/reference/rpc/google.pubsub.v1#acknowledgerequest)). Refer to the code samples in the [Cloud Pub/Sub Subscriber Pull Guide](https://docs.cloud.google.com/pubsub/docs/pull) for more details on acknowledging messages either [asynchronously](https://docs.cloud.google.com/pubsub/docs/pull#asynchronous_pull_mode) or [synchronously](https://docs.cloud.google.com/pubsub/docs/pull#synchronous_pull_mode) using the official RPC-based client libraries.

If the notifications are not acknowledged (e.g. your webhook callback returns an error or times out), Cloud Pub/Sub will retry the notification at a later time.

[](https://developers.google.com/gmail/api/guides/push)

Stopping mailbox updates
------------------------

To stop receiving updates on a mailbox, call [`stop`](https://developers.google.com/workspace/gmail/api/reference/rest/v1/users/stop) and all new notifications should stop within a few minutes.

[](https://developers.google.com/gmail/api/guides/push)

Limitations
-----------

### Max notification rate

Each Gmail user being watched has a maximum notification rate of 1 event/sec. Any user notifications exceeding that rate will be dropped. Be careful when handling notifications to be sure not to trigger another notification, and thereby start a notification loop.

### Reliability

Typically all notifications should be delivered reliably within a few seconds; however in some extreme situations notifications may be delayed or dropped. Make sure to handle this possibility gracefully, so that the application still syncs even if no push messages are received. For example, fall back to periodically calling [`history.list`](https://developers.google.com/workspace/gmail/api/reference/rest/v1/users.history/list) after a period with no notifications for a user.

### Cloud Pub/Sub Limitations

The Cloud Pub/Sub API also has its own limitations, specifically detailed in its [pricing](https://docs.cloud.google.com/pubsub/pricing) and [quotas](https://docs.cloud.google.com/pubsub/quotas) documentation.

 Send feedback 
Except as otherwise noted, the content of this page is licensed under the [Creative Commons Attribution 4.0 License](https://creativecommons.org/licenses/by/4.0/), and code samples are licensed under the [Apache 2.0 License](https://www.apache.org/licenses/LICENSE-2.0). For details, see the [Google Developers Site Policies](https://developers.google.com/site-policies). Java is a registered trademark of Oracle and/or its affiliates.

Last updated 2026-01-02 UTC.

 Need to tell us more?  [[["Easy to understand","easyToUnderstand","thumb-up"],["Solved my problem","solvedMyProblem","thumb-up"],["Other","otherUp","thumb-up"]],[["Missing the information I need","missingTheInformationINeed","thumb-down"],["Too complicated / too many steps","tooComplicatedTooManySteps","thumb-down"],["Out of date","outOfDate","thumb-down"],["Samples / code issue","samplesCodeIssue","thumb-down"],["Other","otherDown","thumb-down"]],["Last updated 2026-01-02 UTC."],[],[]] 

*   [![Image 3: Blog](https://www.gstatic.com/images/branding/product/2x/google_cloud_64dp.png) Blog](https://developers.googleblog.com/search/?query=Google+Workspace)Read the Google Workspace Developers blog 
*   [![Image 4: X (Twitter)](https://developers.google.com/static/site-assets/logo-x.svg) X (Twitter)](https://twitter.com/workspacedevs)Follow @workspacedevs on X (Twitter) 
*   [![Image 5: Code Samples](https://developers.google.com/static/site-assets/logo-github.svg) Code Samples](https://github.com/googleworkspace)Explore our sample apps or copy them to build your own 
*   [![Image 6: Codelabs](https://developers.google.com/static/site-assets/developers-logo-color.svg) Codelabs](https://codelabs.developers.google.com/?product=googleworkspace)Try a guided, hands-on coding experience 
*   [![Image 7: Videos](https://developers.google.com/static/site-assets/logo-youtube.svg) Videos](https://www.youtube.com/channel/UCUcg6az6etU_gRtZVAhBXaw)Subscribe to our YouTube channel 

*   ### Google Workspace for Developers

    *   [Platform overview](https://developers.google.com/workspace)
    *   [Developer products](https://developers.google.com/workspace/products)
    *   [Release notes](https://developers.google.com/workspace/release-notes)
    *   [Developer support](https://developers.google.com/workspace/support)
    *   [Terms of Service](https://developers.google.com/workspace/terms)

*   ### Tools

    *   [Admin console](https://admin.google.com/)
    *   [Apps Script Dashboard](https://script.google.com/)
    *   [Google Cloud console](https://console.cloud.google.com/workspace-api)
    *   [APIs Explorer](https://developers.google.com/workspace/explore)

*   ### Connect

    *   [Blog](https://developers.googleblog.com/search/?query=Google+Workspace)
    *   [Newsletter](https://developers.google.com/workspace/newsletters)
    *   [X (Twitter)](https://twitter.com/workspacedevs)
    *   [YouTube](https://www.youtube.com/channel/UCUcg6az6etU_gRtZVAhBXaw)

[![Image 8: Google Developers](https://www.gstatic.com/devrel-devsite/prod/v5f5028bd8220352863507a1bacc6e2ea79a725fdb2dd736f205c6da16a3d00d1/developers/images/lockup-google-for-developers.svg)](https://developers.google.com/)
*   [Android](https://developer.android.com/)
*   [Chrome](https://developer.chrome.com/home)
*   [Firebase](https://firebase.google.com/)
*   [Google Cloud Platform](https://cloud.google.com/)
*   [Google AI](https://ai.google.dev/)
*   [All products](https://developers.google.com/products)

*   [Terms](https://developers.google.com/terms/site-terms)
*   [Privacy](https://policies.google.com/privacy)
*   [Manage cookies](https://developers.google.com/gmail/api/guides/push#)

*   [English](https://developers.google.com/workspace/gmail/api/guides/push)
*   [Deutsch](https://developers.google.com/workspace/gmail/api/guides/push?hl=de)
*   [Español](https://developers.google.com/workspace/gmail/api/guides/push?hl=es)
*   [Español – América Latina](https://developers.google.com/workspace/gmail/api/guides/push?hl=es-419)
*   [Français](https://developers.google.com/workspace/gmail/api/guides/push?hl=fr)
*   [Indonesia](https://developers.google.com/workspace/gmail/api/guides/push?hl=id)
*   [Italiano](https://developers.google.com/workspace/gmail/api/guides/push?hl=it)
*   [Polski](https://developers.google.com/workspace/gmail/api/guides/push?hl=pl)
*   [Português – Brasil](https://developers.google.com/workspace/gmail/api/guides/push?hl=pt-br)
*   [Tiếng Việt](https://developers.google.com/workspace/gmail/api/guides/push?hl=vi)
*   [Türkçe](https://developers.google.com/workspace/gmail/api/guides/push?hl=tr)
*   [Русский](https://developers.google.com/workspace/gmail/api/guides/push?hl=ru)
*   [עברית](https://developers.google.com/workspace/gmail/api/guides/push?hl=he)
*   [العربيّة](https://developers.google.com/workspace/gmail/api/guides/push?hl=ar)
*   [فارسی](https://developers.google.com/workspace/gmail/api/guides/push?hl=fa)
*   [हिंदी](https://developers.google.com/workspace/gmail/api/guides/push?hl=hi)
*   [বাংলা](https://developers.google.com/workspace/gmail/api/guides/push?hl=bn)
*   [ภาษาไทย](https://developers.google.com/workspace/gmail/api/guides/push?hl=th)
*   [中文 – 简体](https://developers.google.com/workspace/gmail/api/guides/push?hl=zh-cn)
*   [中文 – 繁體](https://developers.google.com/workspace/gmail/api/guides/push?hl=zh-tw)
*   [日本語](https://developers.google.com/workspace/gmail/api/guides/push?hl=ja)
*   [한국어](https://developers.google.com/workspace/gmail/api/guides/push?hl=ko)

Info 

Chat 

API
